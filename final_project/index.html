<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Photo Maker</title>
  <link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>
  <script src="js/jquery.min.js"></script>
  <div class='container' id='combo'>
    <div class='centered' id='text'></div>
  </div>


  <button type="button" id="tReload">Next Quote</button>
  <button type="button" id="pReload">Next Photo</button>
</body>
<script>
  //$('body').append('Test');
  //Grabs json data for the subreddit. By default grabs the one off of hot
  $.get('https://www.reddit.com/r/EarthPorn/.json')
    .done(function (pdata) {
      $.get('https://www.reddit.com/r/nocontext/.json')
        .done(function (tdata) {
          num = Math.floor((Math.random() * 24) + 1); //json is limited to 27 items, and the top 2 are info on the subreddit
          console.log(num);
          console.log(tdata.data.children[num].data.title);

          pcurrent = pdata.data.children[num].data.preview.images[0].source.url;
          console.log(pcurrent);
          tcurrent = tdata.data.children[num].data.title;
          $('#combo').prepend('<img id="image" src=' + pcurrent + ' style="width:100%">');
          $('#text').append(tcurrent);

          //Click event to reload the text with a new text. Will eventually add change for photo as well
          $('#tReload').click(function () {
            num = Math.floor((Math.random() * 26) + 2); // get a new random number to change the text
            tchange = tdata.data.children[num].data.title;
            $("#text").html($("#text").html().replace(tcurrent, tchange)); // Replace the old text with the new text
            tcurrent = tchange; // set old text to new current text, so that this can be ran multiple times
          })

          $('#pReload').click(function() {
            num = Math.floor((Math.random() * 24) + 1);
            pchange = pdata.data.children[num].data.preview.images[0].source.url;
            $('#image').attr('src',pchange);
            pcurrent = pchange;
          })
        });
    });
</script>

</html>